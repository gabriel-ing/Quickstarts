
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid Chart</title>
    <!-- Include Mermaid.js from CDN -->
    <script src="https://unpkg.com/mermaid@11.12.2/dist/mermaid.min.js"></script>
    <script src="https://unpkg.com/dom-to-image@2.6.0/src/dom-to-image.js"></script>
<style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .mermaid {
            text-align: center;
        }
    </style>
</head>
<body>
    <button id="save-button">Save SVG</button>
    <div height="100px"></div>
    <div class="mermaid" id="mermaid-chart">
flowchart TD
    bird["Birds of North America"]

    subgraph Anatidae["Anatidae"]
        Anatidae_val["Ducks, Geese and Swans"]
    end

    subgraph Aix["Aix"]
        Aix_val["Wood Duck"]
    end

    subgraph Anas["Anas"]
        Anas_val["American Black Duck"]
    end

    subgraph Branta["Branta"]
        Branta_val["Barnacle Goose"]
    end

    subgraph Odontophoridae["Odontophoridae"]
        Odontophoridae_val["New World Quails"]
    end

    subgraph Callipepia["Callipepia"]
        Callipepia_californica["California Quail"]
        Callipepia_gambelii["Gambel's Quail"]
    end

    bird --> Anatidae
    bird --> Odontophoridae

    Anatidae --> Aix
    Anatidae --> Anas
    Anatidae --> Branta

    Odontophoridae --> Callipepia


    </div>

    <script>

  mermaid.initialize({
    startOnLoad: true,          // we'll run explicitly
    theme: 'base',
    themeVariables :{
        
        primaryColor: '#3f38c7',
        primaryTextColor: '#fff',
        primaryBorderColor: '#2F2A95',
        lineColor: '#000000',
        secondaryColor: '#00B2A9',
        tertiaryColor: '#00B2A9',
        tertiaryTextColor: "#000000",
        fontSize:"20px",
        systemFontWeight:"700",
    },
    look: 'classic',
    
    flowchart: { htmlLabels: true },   
    sequence: { useMaxWidth: true }    
  });

  // Ensure diagrams exist in the DOM, then render:
//    await mermaid.run({ querySelector: '.mermaid' });


        document.getElementById("save-button").addEventListener("click", (event)=>{
            const div = document.getElementById("mermaid-chart")
            const chart = div.querySelector(':scope > svg');
            domtoimage.toPng(chart)
                .then(function (dataUrl) {
                const a = document.createElement('a');
                a.href = dataUrl;
                a.download = 'diagram.png';
                a.click();
                })
                .catch(function (error) {
                    console.error('oops, something went wrong!', error);
    });
        })

        
    </script>
</body>
</html>
